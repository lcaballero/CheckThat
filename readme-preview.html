<html> <head> <title>Previewing Readme.md</title> </head> <body>
<h1>Introduction <a href="https://travis-ci.org/"><img alt="Build Status" src="https://travis-ci.org/lcaballero/check-that.svg?branch=master"/></a></h1> <p>This is a little library that is very similar to <a href="http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Preconditions.html">Google&#39;s Guava checkArgs library</a>.</p> <p>Though similar, it is not a direct port of that library&#39;s interface. Mostly due to JavaScript&#39;s dynamic nature this library leans towards a more functional interface.</p> <h2>Installation</h2> <p><code> %&gt; npm install check-that [--save] </code></p> <h2>Usage</h2> <p>A typical example is shown below. This example demonstrates checking the value of &#39;name&#39;. The value, in this case, must exist and be non-null. In this case the default &#39;exists&#39; function tests that the value is not <code>undefined</code> and not <code>null</code>. But, if the value is either <code>null</code> or <code>undefined</code> the check will throw an exception with the last function <code>elseThrowIt</code>.</p> <p><code></code>`coffee</p> <h1>In CoffeeScript:</h1> <p>CheckThat = require(&#39;CheckThat&#39;)</p> <p>{ exists, notEmpty, checkThat } = CheckThat</p> <p>importantFunc: (name) -&gt; checkThat(&#39;Name must exist and be non-empty&#39;, name, exists, notEmpty, elseThrowIt) ... <code></code>`</p> <p><code></code>`javascript // In JavaScript:</p> <p>CheckThat = require(&#39;CheckThat&#39;)</p> <p>var exists = CheckThat.exists, notEmpty = CheckThat.notEmpty, checkThat = CheckThat.checkThat;</p> <p>function importantFunc(name) { checkThat(&#39;Name must exist and be non-empty&#39;, name, exists, notEmpty, elseThrowIt) ... } <code></code>`</p> <p>The <code>checkThat</code> signature is <code>checkThat(message, val, predicates..., cb)</code>. Take note that the <code>cb</code> function appears after the var-args <code>predicate</code> appears as the second to last parameter. This is a bit unusual, and so how it works needs some explanation. If the list of predicates is 1 then the <code>cb</code> function defaults to <code>elseThrowIt</code>. Which means that if the <code>val</code> fails to pass the lone predicate an <code>Error</code> will be thrown, in this special case.</p> <p>The code below is an example where an <code>Error</code> will be thrown since only one predicate function is provided.</p> <p><code>coffee someFunction: (val) -&gt; checkThat(&#39;Name must exist&#39;, val, exists) </code></p> <p>As an alternative to the function above where <code>exists</code> sits as the last predicate there another function is provided by <code>check-that</code> with <code>checkExists</code>.</p> <p><code>coffee someFunction: (val) -&gt; checkExists(val, &#39;Name must exists&#39;) </code></p> <p><code>checkExists</code> is built on top of <code>checkThat</code> and the other predicate functions to produce a somewhat simpler interface for the same result.</p> <h2>API</h2> <h5><code>checkThat(message, val, predicates..., cb)</code></h5> <p>This is the work horse of the library. The typical use is shown above. It accepts a message and a value to run through the predicates, if the number of predicates is 1 then the signature/logic assumes no callback, and checkThat will throw an Error (instead of running the callback). In the case where the number of predicates is greater than 1 the last function is considered the callback, and will be called and passed an <code>Error</code> wrapping the message if the value fails any of the predicates. Else the error value to the callback will be <code>null</code>.</p> <h5><code>exists(val)</code></h5> <h5><code>notEmpty(val)</code></h5> <h5><code>checkConstraints(val, predicates)</code></h5> <p>Returns true if <em>all</em> the predicates validate the value, else it returns false, and does not throw an Error.</p> <h5><code>checkExists(value, [message])</code></h5> <p>If the value <em>is not</em> <code>null</code> and <em>is not</em> <code>undefined</code>. If the value is <code>null</code> or <code>undefined</code> then an <code>Error</code> is thrown with the a default message if one is not provided.</p> <h5><code>checkIndex(arr, index, [message])</code></h5> <p>Given an any object with a length property this function will validate that index is both non-negative and less then the length. Else it will throw an <code>Error</code> with the given message or a default message.</p> <h5><code>checkNonEmpty(aString, [message])</code></h5> <p>Given a string this function will test to see if the string, when trimmed, is non-empty. If the string is made of of only whitespace then an <code>Error</code> will be thrown.</p> <h5><code>elseThrowIt(err)</code></h5> <p>In the code above <code>elseThrowIt</code> is shown as the last parameter to <code>checkThat</code>. It acts as a callback where no custom callback is provided. If any of the predicates fail to validate the the value (by returning false) then then <code>checkThat</code> will generate an <code>Error</code> with a message and pass it to <code>elseThrowIt</code>. In which case the error will be non-null and <code>elseThrowIt</code> will literally throw the error. However, if the all predicates validate the function then error will be null when passed to <code>elseThrowIt</code> and it will return <code>true</code> without throwing an <code>Error</code>.</p> <h2>License</h2> <p>See license file.</p> <p>The use and distribution terms for this software are covered by the <a href="http://opensource.org/licenses/eclipse-1.0.txt">Eclipse Public License 1.0</a>, which can be found in the file &#39;license&#39; at the root of this distribution. By using this software in any fashion, you are agreeing to be bound by the terms of this license. You must not remove this notice, or any other, from this software.</p>
</body></html>
